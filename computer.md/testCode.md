## 12. Test Code
### 1. 테스트란?
1. 기능을 개발한 후 잘 구현되었는지 테스트 코드를 작성하고 리팩토링을 통해 향상시킬 수 있다. 
2. 의도된 대로 정확히 작동하는지 검증하는 절차이다.

### 2. 시간의 단축
1. 테스트 코드 작성 전 테스트 과정
    1. 코드를 수정한다.
    2. 서버를 동작시킨다.
    3. 필요에 따라 테스트에 필요한 데이터를 DB에 입력한다.
    4. 브라우저를 통해 우리의 서버에 접속하고, 테스트 대상 메소드를 동작시키는 요청을 한다.
    5. 테스트를 마치고 DB의 데이터를 정리한다.
    6. 이 과정을 반복한다.
2. 테스트 코드 작성 후 테스트 과정
    1. 코드를 수정한다.
    2. 테스트 코드를 실행한다.(테스트 코드를 이미 작성했다는 가정)
    3. 결과를 확인한다.

### 3. 테스트 코드 작성의 장점
1. 개발 과정 중 예상치 못한 문제를 미리 발견할 수 있다.(에러를 클라이언트 보다 빨리 발견할 수 있다.)
2. 작성한 코드가 의도한 대로 작동하는지 검증할 수 있다.
3. 코드 변경에 대한 사이드 이펙트를 줄이는 예방책이다.
    - Side Effect : 요구되어지는 이펙트 이외의 다른 이펙트가 발생하는 현상
4. 코드 수정이 필요한 상황에서 유연하고 안정적인 대응을 할 수 있게 해준다.
5. 코드의 모듈화를 한 번 더 고민하게 해준다.
    - 코드의 모듈화 : 거대한 문제를 작은 조각의 문제로 나누어 다루기 쉽도록 하는 과정, 여기서 작게 나누어진 부분을 모듈이라고 한다.
6. 코드 변경시, 변경 부분으로 인한 영향도를 쉽게 파악할 수 있다.
7. 코드 리팩토링 시 기능 구현이 동일하게 되었다는 판단을 내릴 수 있다.
8. 테스트 코드를 통해 동작하는 방식 및 결과 확인이 가능하다.

### 4. 테스트의 종류
![이미지](https://i0.wp.com/hanamon.kr/wp-content/uploads/2022/07/%E1%84%90%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3-%E1%84%91%E1%85%B5%E1%84%85%E1%85%A1%E1%84%86%E1%85%B5%E1%84%83%E1%85%B3.jpeg?w=1420&ssl=1)
- 테스트는 테스트 대상 범위나 성격에 따라 UI text, Integration test, Unit test등 크게 세가지로 구분한다.
1. Unit Test(단위 테스트)
    1. 소형 테스트에 속하는 테스트이다.
    2. 클래스 범주내에서 작은 단위(함수)의 기능에 대한 유효성을 검증하는 테스트이다.
    3. 단위 테스트는 매우 간단하고 명확하며 빠르게 실행된다는 특징이 있다.
    4. 하나의 함수에 대한 하나 이상의 테스트가 존재할 수 있고, 각 각의 조건에 대한 유효성을 검증한다.
    5. 이렇게 작성된 테스트가 많을 수록 해당 로직에 대한 신뢰도가 높아질 수 있다.
    6. 또한, 작게 쪼개진 단위 테스트는 해당 로직이 어떤 역할을 하는지 쉽게 파악할 수 있다.
2. Integration Test(통합 테스트)
    1. 중형 테스트에 속하는 테스트이다.
    2. 서로 다른 모듈 혹은 클래스 간 상호작용의 유효성을 검사하는 테스트이다.
    3. 이러한 통합 테스트가 필요한 이유는 각각 단위 테스트가 검증되었다 하더라도 모듈 간 인터페이스 및 데이터 흐름이 의도한 대로 작동하지 않는 경우도 있기 때문이다.
    4. 그래서 조금 더 넓은 범위에서 추가적인 테스트가 필요하다.
    5. 또한 통합 테스트는 각 모듈에 대한 설정 또는 테스트를 하기 위해 사전 조건이 필요한 경우도 있기 때문이다.
    6. 단위 테스트보다 테스트 코드를 작성하기가 복잡하다.
    7. 하지만 단위 테스트 보다 더 넓은 범위의 종속성까지 테스트함으로써 단위 테스트 보다 좀 더 유의미한 테스트가 되는 경우가 많다.
3. UI Test
    1. 대형 테스트로 분류되는 테스트이다.
    2. 실제 사용자들이 사용하는 화면에 대한 테스트를 하여 서비스의 기능이 정상적으로 작동하는지 검증하는 테스트이다.
    3. UI 테스트는 실제 앱을 사용하는 사용자의 흐름에 대해 테스트 함으로써 UI 변경 사항으로 발생할 수 있는 문제를 사전에 차단한다.
    4. 그렇게 함으로써 신뢰성을 높인다.
    5. 하지만 화면과 직접적으로 연관되어잇는 테스트이다보니 실행 시간도 오래 걸리고 디자인이 변경될 때마다 테스트 코드의 수정이 필요하다.
    6. 그래서 유지 보수 비용도 크다.
4. 테스트 피라미드
    1. 테스트 피라미드는 테스트하고자 하는 단위와 목적에 따라 테스트를 구분하고 있다.
    2. 단위 테스트는 가장 작은 단위인 함수를 검증하고, 통합 테스트는 모듈 간 상호작용이 올바르게 동작하는지 검증하고, UI테스트는 가장 마지막에 사용자 인터랙션이 오류 없이 동작하는지 검증한다.
    3. 피라미드 형태로 표현된 이유는 테스트 코드를 작성하는데 필요한 비용도 다르기 때문이다.
    4. 단위 테스트는 검증하려는 범위가 작기 때문에 작성이 수월하고, 검증 범위도 작기 때문에 무수히 많은 테스트가 작성될 수 있다.
    5. 통합 테스트는 좀 더 넓은 범위의 검증이기 때문에 고려할 부분이 많아서 더 많은 비용이 필요하다.
    6. UI 테스트는 가장 많은 비용과 시간이 필요하지만 사용자 시나리오 기반으로 작성하기 때문에 테스트 코드의 양은 적다.
    7. 구글 공식 문서에서는 각 테스트 비율을 단위는 70%, 통합은 20%, UI은 10%로 구성하는 것이 좋다고한다.
    8. 테스트를 처음 도입하는 분이라면 비교적 작성의 비용이 적은 단위 테스트부터 시작하는 것을 추천한다고 한다.

### 5. TDD(테스트 주도 개발)
1. TDD란? 
    1. Test-Driven-Development : 코드 작성 전 테스트 코드를 먼저 작성하는 것이다.
    2. 개발 방식, 방법론 중 하나이다.
    3. 테스트를 먼저 짜고 테스트를 통과할만큼의 코드만 짜서 테스트한다.
    4. 실패하는 테스트를 먼저 작성하고 그에 해당하는 기능을 만들어나가는 방식이다.
    5. 이후엔 리팩토링으로 효율성 향상 시켜야 한다.
2. TDD 특징
    1. 케이스 단위로 테스트 정리 : 기능을 구현하는데 절차
    2. 예외 케이스를 생각해야 한다.
3. TDD 좋은 점
    1. 요구사항에 대한 분석 및 이해를 바탕으로 설계자의 관점에서 개발할 수 있다.
    2. 모든 요구사항, 목표에 대해서 점검할 수 있고, 사용자 입장에서 코드를 작성할 수 있다.(시스템 전반적인 설계 향상)
    3. 자연스럽게 테스트 통과율이 높아진다.
    4. 오버 엔지니어링 방지
    4. 설계에 대한 피드백에 빠르다.    